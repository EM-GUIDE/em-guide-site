---
import BaseLayout from "../layouts/BaseLayout.astro";

import fetchApi from "../lib/strapi";
import type NetworkMember from "../interfaces/network-member";

const networkMembers = await fetchApi<NetworkMember[]>({
  endpoint: "network-members",
  wrappedByKey: "data",
  query: {
		// @ts-ignore
    populate: ["*"],
		// @ts-ignore
    pagination: {
      pageSize: 100,
    },
  },
});
---

<BaseLayout>
  <h3>Network</h3>
  <section
    class="flex flex-col items-center justify-center lg:flex-row lg:flex-wrap sm:flex-row sm:space-x-4 lg:space-x-8"
  >
    {
      networkMembers.map((member) => {
        return (
          <div class="flex flex-col items-center justify-center">
            <div class="flex justify-center flex-shrink-0 mb-5 sm:inline-block">
              {member.attributes.logo.data && (
                <img
                  loading="lazy"
                  src={`${import.meta.env.PUBLIC_ASSET_URL}${
                    member.attributes.logo.data.attributes.url
                  }`}
                  alt=""
                  class="h-20"
                />
              )}
            </div>
            <div>
              <h1 class="text-xl font-normal lg:text-2xl font-display">
                {member.attributes.name}
              </h1>
            </div>
          </div>
        );
      })
    }
  </section>
</BaseLayout>
